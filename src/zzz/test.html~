<html>
<head>
<title>canvas test</title>
<script src="code/FFLoadAll.js"></script>
<script type="text/javascript">
// ---------------------------------------------------------
var resource, canvas, stage, do1, do2, do3;
// ---------------------------------------------------------
var ff;
function pageLoadedFxn(){
	console.log("page loaded");
	ff = new FFLoadAll("code/",classesLoadedFxn);
}
function classesLoadedFxn(){
	resource = new Resource();
	resource.setFxnComplete( resourceLoadedFxn );
	resource.load();
}
function resourceLoadedFxn(){
	canvas = new Canvas(resource,null,0,0,Canvas.STAGE_FIT_FILL);
	stage = new Stage(canvas, (1/2)*1000);
	resource.alertLoadCompleteEvents();
	stage.start();
	stage.addFunction(Stage.EVENT_ON_ENTER_FRAME,efF);
	canvas.addFunction(Canvas.EVENT_CLICK,canvasClickFxn);
	// -------------
	do1 = new DO();
	do1.clearGraphics();
	do1.setFillRGBA(0x01122FF99);
	do1.drawRect(-50,-50,100,100);
	do1.matrix.rotate(Math.PI/4);
	do1.matrix.translate(100,100);
	stage.addChild(do1);
	// -------------
	do2 = new DO();
	do2.clearGraphics();
	do2.setFillRGBA(0x099000099);
	do2.drawRect(-50,-50,100,100);
	do2.matrix.rotate(Math.PI/8);
	do2.matrix.translate(50,50);
	do1.addChild(do2);
	// -------------
	do3 = new DO();
	do3.clearGraphics();
	do3.setFillRGBA(0x006633CC);
	do3.drawRect(-150,0,100,100);
	do3.matrix.rotate(Math.PI/3);
	do3.matrix.translate(50,50);
	do1.addChild(do3);
	// -------------
	do1.addFunction(Canvas.EVENT_CLICK,do1Click);
	do2.addFunction(Canvas.EVENT_CLICK,do2Click);
	do3.addFunction(Canvas.EVENT_CLICK,do3Click);
}
// ---------------------------------------------------------
function do1Click(o){
	console.log("1");
}
function do2Click(o){
	console.log("2");
}
function do3Click(o){
	console.log("3");
}
function canvasClickFxn(pos){
	//console.log("clicked: ("+pos.x+","+pos.y+")");
	/*
		if(intersection==do1){
			console.log( "1" );
		}else if(intersection==do2){
			console.log( "2" );
		}else if(intersection==do3){
			console.log( "3" );
		}
		//console.log( intersection );
	}*/
	/*
	var do1 = new DO();
	do1.clearGraphics();
	do1.setFillRGBA(0x00000FF99);
	do1.drawRect(-10,-10,20,20);
	do1.matrix.translate(pos.x,pos.y);
	stage.addChild(do1);
	*/
	/*
	do1.setLine(1.0,0x00FF00);
	do1.beginPath();
	do1.moveTo(0,0);
	do1.lineTo(100,0);
	do1.lineTo(100,100);
	do1.lineTo(0,100);
	do1.lineTo(0,0);
	do1.strokeLine();
	do1.endPath();
	*/
}
function efF(o){
	/*
	do1.matrix.identity();
	do1.matrix.rotate(Math.PI/8);
	do1.matrix.translate(Math.random()*100,Math.random()*100);
	do2.matrix.identity();
	do2.matrix.translate(Math.random()*100,Math.random()*100);
	*/
}
// ---------------------------------------------------------

// ---------------------------------------------------------
/*
polygon filling
click / hit-test
panels/windows
*/
</script>
</head>
<body onload="pageLoadedFxn();" style="border:0px;margin:0px;border:0px;background:url('pattern.jpg');">


</body>
</html>
